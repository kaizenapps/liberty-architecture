<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frequency Developer Gateway - Comprehensive Mindmap</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script src="https://unpkg.com/@mui/material@latest/umd/material-ui.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style>
        .mermaid {
            background-color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            margin: 1rem 0;
            width: 100%;
            max-width: 100%;
            overflow-x: auto;
            min-height: 300px;
        }
        .mermaid svg {
            max-width: 100% !important;
            height: auto !important;
        }
        .section {
            background-color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            margin: 1rem;
            overflow-x: auto;
        }
        .link-card {
            background-color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem;
            transition: transform 0.2s;
        }
        .link-card:hover {
            transform: translateY(-2px);
        }
        .important-link {
            color: #2563eb;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }
        .important-link:hover {
            color: #1d4ed8;
            text-decoration: underline;
        }
        pre {
            background-color: #f9fafb;
            padding: 1rem;
            border-radius: 0.375rem;
            overflow-x: auto;
        }
        code {
            font-family: ui-monospace, monospace;
            background-color: #f3f4f6;
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            border: 1px solid #e5e7eb;
            padding: 0.75rem;
            text-align: left;
        }
        th {
            background-color: #f9fafb;
        }
        .card {
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            transition: box-shadow 0.2s;
        }
        .card:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        @media (max-width: 640px) {
            .section {
                margin: 0.5rem;
                padding: 0.75rem;
            }
            h1 {
                font-size: 1.75rem !important;
            }
            h2 {
                font-size: 1.5rem !important;
            }
            h3 {
                font-size: 1.25rem !important;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen p-4">
    <div class="max-w-7xl mx-auto">
    <h1 class="text-4xl font-bold text-center mb-4">Frequency Developer Gateway</h1>
    <p class="text-lg text-gray-600 text-center mb-8">Last updated: March 27, 2025</p>

    <div class="section mb-8">
        <h2 class="text-2xl font-bold mb-4">Important Links</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="link-card">
                <h3 class="text-xl font-semibold mb-2">Official Gateway Repository</h3>
                <p class="text-gray-600 mb-2">Access the actual gateway implementation for your projects.</p>
                <a href="https://github.com/ProjectLibertyLabs/gateway" class="important-link" target="_blank">ProjectLibertyLabs/gateway →</a>
            </div>
            <div class="link-card">
                <h3 class="text-xl font-semibold mb-2">Social App Template</h3>
                <p class="text-gray-600 mb-2">Start building your social app with Frequency integration.</p>
                <a href="https://github.com/ProjectLibertyLabs/social-app-template" class="important-link" target="_blank">ProjectLibertyLabs/social-app-template →</a>
            </div>
        </div>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">1. Project Overview</h2>
        <p class="text-lg text-gray-600 mb-4">The Frequency Developer Gateway is a suite of microservices designed to simplify interactions with the Frequency blockchain, bridging the gap between Web2 and Web3 development. It provides a familiar REST API interface that abstracts away complex blockchain operations, making it more accessible for traditional web developers.</p>
        
        <h3 class="text-2xl font-bold mb-2">Core Purpose</h3>
        <div class="mermaid">
        mindmap
            root((Frequency Developer Gateway))
                Purpose
                    Bridge Web2 and Web3
                    Simplify blockchain interactions
                    Enable social applications
                    Abstract complex operations
                    Provide familiar REST APIs
                Value Proposition
                    Lower adoption barriers
                    Accelerate development
                    Promote decentralization
                    Maintain flexibility
                    Enable diverse implementations
        </div>
        
        <h3 class="text-2xl font-bold mb-2">High-Level Architecture</h3>
        <div class="mermaid">
        flowchart LR
            C[Client Applications] --> Gateway
            subgraph Gateway["Gateway Microservices"]
                A[Account Service] --- G[Graph Service]
                G --- CP[Content Publishing Service]
                CP --- CW[Content Watcher Service]
            end
            Gateway --> F[Frequency Blockchain]
            CP --> IPFS[IPFS Storage]
        </div>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">2. Microservices Breakdown</h2>
        
        <h3 class="text-2xl font-bold mb-2">2.1 Account Service</h3>
        <div class="mermaid">
        mindmap
            root((Account Service))
                Core Functions
                    Account Creation
                        User Registration
                        Provider Setup
                    Handle Management
                        Username Claims
                        Handle Updates
                    Key Management
                        Add Keys
                        Retrieve Keys
                        Key Rotation
                    SIWF Integration
                        Web3 Authentication
                        Wallet Integration
                    API Auth
                        Token Management
                        Permission Control
        </div>
        
        <div class="card">
            <div class="card-title">Key Features</div>
            <ul>
                <li>Create and manage DSNP accounts (MSA Ids)</li>
                <li>Claim and manage unique handles (usernames)</li>
                <li>Add and retrieve keys for account authentication</li>
                <li>Retrieve delegation information for MSA Ids</li>
                <li>Seamless integration with Web3 wallets</li>
            </ul>
        </div>
        
        <h3 class="text-2xl font-bold mb-2">2.2 Graph Service</h3>
        <div class="mermaid">
        mindmap
            root((Graph Service))
                Core Functionality
                    Fetch social graphs
                    Update social connections
                    Watch graph changes
                    Manage follows/unfollows
                Architecture
                    API Component
                    Worker Component
                    Redis job queue
                    Graph monitoring
                Use Cases
                    Social network connections
                    Content discovery
                    User recommendations
                    Private vs public graphs
        </div>
        
        <div class="card">
            <div class="card-title">Key Features</div>
            <ul>
                <li>Retrieve public and private social connection data</li>
                <li>Follow/unfollow users on the network</li>
                <li>Monitor changes in social graphs</li>
                <li>Support for reconnection services for migrating users</li>
            </ul>
        </div>
        
        <h3 class="text-2xl font-bold mb-2">2.3 Content Publishing Service</h3>
        <div class="mermaid">
        mindmap
            root((Content Publishing Service))
                Core Functionality
                    Asset file uploads
                    Create broadcasts/posts
                    Create replies
                    Create reactions
                    Update/delete content
                    Update profiles
                Architecture
                    API Controller
                    Worker Process
                    BullMQ Queue
                    IPFS Integration
                Use Cases
                    Social media posts
                    Content management
                    User interactions
                    Media sharing
        </div>
        
        <div class="card">
            <div class="card-title">Key Features</div>
            <ul>
                <li>Upload asset files to off-chain storage (IPFS)</li>
                <li>Create new broadcasts (posts) on the network</li>
                <li>Reply to existing content</li>
                <li>Add reactions to content</li>
                <li>Update or remove existing content</li>
                <li>Manage user profile information</li>
                <li>Monitor and manage publishing jobs</li>
            </ul>
        </div>
        
        <h3 class="text-2xl font-bold mb-2">2.4 Content Watcher Service</h3>
        <div class="mermaid">
        mindmap
            root((Content Watcher Service))
                Core Functionality
                    Parse DSNP messages
                    Webhook integration
                    Flexible content filtering
                    Scanner operations
                Architecture
                    Blockchain scanner
                    Message parser
                    Webhook dispatcher
                    Block range monitoring
                Use Cases
                    Content discovery
                    Notifications
                    Feed generation
                    Custom integrations
        </div>
        
        <div class="card">
            <div class="card-title">Key Features</div>
            <ul>
                <li>Monitor and parse messages on Frequency blockchain</li>
                <li>Send content updates to registered webhooks</li>
                <li>Filter content by schema and MSA Id</li>
                <li>Control scanning operations (start/stop/restart)</li>
                <li>Specify custom block ranges for content retrieval</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">3. Technical Architecture</h2>
        
        <h3 class="text-2xl font-bold mb-2">3.1 Component Interaction</h3>
        <div class="mermaid">
        sequenceDiagram
            participant Client as Client Application
            participant AS as Account Service
            participant GS as Graph Service
            participant CPS as Content Publishing Service
            participant CWS as Content Watcher Service
            participant Freq as Frequency Blockchain
            
            Client->>AS: Create/Authenticate User
            AS->>Freq: Submit Account Extrinsic
            Freq-->>AS: Confirm Account Creation
            AS-->>Client: Return Account Details
            
            Client->>GS: Establish Social Connections
            GS->>Freq: Update Social Graph
            Freq-->>GS: Confirm Graph Update
            GS-->>Client: Return Updated Graph
            
            Client->>CPS: Publish New Content
            CPS->>IPFS: Store Content Data
            IPFS-->>CPS: Return Content URI
            CPS->>Freq: Announce Content Publication
            Freq-->>CPS: Confirm Publication
            CPS-->>Client: Return Content Publication Status
            
            CWS->>Freq: Monitor for New Content
            Freq-->>CWS: Send New Content Announcements
            CWS->>Client: Deliver Content Updates via Webhook
        </div>
        
        <h3 class="text-2xl font-bold mb-2">3.2 Technology Stack</h3>
        <div class="mermaid">
        mindmap
            root((Technology Stack))
                Backend Framework
                    NestJS
                    TypeScript
                    Node.js
                Data Management
                    Redis
                    BullMQ
                    Job queues
                Blockchain Integration
                    Polkadot API
                    DSNP Protocol
                    Frequency Chain
                Storage
                    IPFS
                Testing
                    Jest
                    Supertest
                    E2E Tests
                Containerization
                    Docker
                    Docker Compose
                Documentation
                    Swagger
                    OpenAPI
                    mdBook
        </div>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">4. Setup & Installation</h2>
        
        <h3 class="text-2xl font-bold mb-2">4.1 Prerequisites</h3>
        <ul>
            <li><code>Docker</code> and <code>Docker Compose</code> for container management</li>
            <li><code>Node.js</code> for local development</li>
            <li><code>mdBook</code> for building documentation</li>
        </ul>
        
        <h3 class="text-2xl font-bold mb-2">4.2 Quick Start Guide</h3>
        <pre><code>git clone git@github.com:ProjectLibertyLabs/gateway.git
cd gateway
./start.sh
</code></pre>
        
        <h3 class="text-2xl font-bold mb-2">4.3 Service-Specific Setup</h3>
        <div class="card">
            <div class="card-title">Account Service Setup</div>
            <pre><code># Copy environment template
cp env-files/account.template.env .env.account

# Start supporting services
./scripts/account/restart-chain-docker.sh

# Start account service
docker compose -f docker-compose.yaml -f docker-compose-e2e.account.yaml --profile account up -d

# Verification
# Access Swagger UI: http://localhost:3000/api/docs/swagger
# View queues: http://localhost:3000/queues</code></pre>
        </div>
        
        <div class="card">
            <div class="card-title">Graph Service Setup</div>
            <pre><code># Copy environment template
cp env-files/graph.template.env .env

# Start services
docker compose up -d redis frequency graph-service-api graph-service-worker

# Setup with account data
make setup-account

# Verification
# Access Swagger UI: http://localhost:3012/docs/swagger</code></pre>
        </div>
        
        <div class="card">
            <div class="card-title">Content Publishing Service Setup</div>
            <pre><code># Copy environment template
cp env-files/content-publishing.template.env .env.content-publishing

# Start supporting services
docker compose up -d frequency redis ipfs

# Start application services
npm run start:content-publishing-api:dev
npm run start:content-publishing-worker:dev

# Setup with account data
make setup-account

# Verification
# Access Swagger UI: http://localhost:3000/docs/swagger</code></pre>
        </div>
        
        <div class="card">
            <div class="card-title">Content Watcher Service Setup</div>
            <pre><code># Copy environment template
cp env-files/content-watcher.template.env .env.content-watcher

# Start required services
docker compose up -d frequency redis ipfs

# Start Content Watcher
npm run start:content-watcher:dev

# Verification
# Access Swagger UI: http://localhost:3000/api/docs/swagger</code></pre>
        </div>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">5. Usage Examples</h2>
        
        <h3 class="text-2xl font-bold mb-2">5.1 Building a Social Application</h3>
        <div class="mermaid">
        flowchart TD
            subgraph "User Authentication Flow"
                A1[Client App] --> A2[Account Service: Create User]
                A2 --> A3[Sign In With Frequency]
                A3 --> A4[Return Account & Token]
            end
            
            subgraph "Social Connection Flow"
                B1[Client App] --> B2[Graph Service: Fetch User's Graph]
                B2 --> B3[Follow/Unfollow Users]
                B3 --> B4[Return Updated Connections]
            end
            
            subgraph "Content Creation Flow"
                C1[Client App] --> C2[Content Publishing: Upload Media]
                C2 --> C3[Create Post with Media]
                C3 --> C4[Return Post Status]
            end
            
            subgraph "Content Discovery Flow"
                D1[Client Server] --> D2[Content Watcher: Register Webhook]
                D2 --> D3[Receive Content Updates]
                D3 --> D4[Process & Display to User]
            end
        </div>

        <h3 class="text-2xl font-bold mb-2">5.2 API Usage Examples</h3>
        
        <h4 class="text-xl font-bold mb-1">Account Service</h4>
        <pre><code>// Create a user account
POST /api/v1/accounts
{
  "handle": "username",
  "owner": "0x..."
}

// Retrieve account information
GET /api/v1/accounts/{msaId}

// Add a key to an account
POST /api/v1/accounts/{msaId}/keys
{
  "keyType": "...",
  "publicKey": "0x..."
}</code></pre>
        
        <h4 class="text-xl font-bold mb-1">Graph Service</h4>
        <pre><code>// Fetch a user's graph
GET /api/v1/graph/{msaId}

// Follow another user
POST /api/v1/graph/{fromMsaId}/connections
{
  "toMsaId": 123
}

// Unfollow a user
DELETE /api/v1/graph/{fromMsaId}/connections/{toMsaId}</code></pre>
        
        <h4 class="text-xl font-bold mb-1">Content Publishing Service</h4>
        <pre><code>// Upload an asset
POST /api/v1/assets
[multipart/form-data]

// Create a post
POST /api/v1/broadcasts
{
  "fromId": 123,
  "content": "Hello world!",
  "assets": ["assetId1", "assetId2"]
}

// Create a reply
POST /api/v1/replies
{
  "fromId": 123,
  "inReplyTo": "urlOfOriginalPost",
  "content": "This is a reply"
}</code></pre>
        
        <h4 class="text-xl font-bold mb-1">Content Watcher Service</h4>
        <pre><code>// Register a webhook
POST /api/v1/webhooks
{
  "url": "https://example.com/webhook",
  "filters": {
    "msaIds": [123, 456],
    "schemas": ["broadcast", "reply"]
  }
}

// Start scanning
POST /api/v1/scanner/start

// Get scanner status
GET /api/v1/scanner/status</code></pre>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">6. Development & Testing</h2>
        
        <h3 class="text-2xl font-bold mb-2">6.1 Development Environment</h3>
        <div class="card">
            <div class="card-title">Local Development</div>
            <ul>
                <li>Each service can be run locally for development</li>
                <li>Supporting services (Redis, Frequency, IPFS) can be run in Docker</li>
                <li>Hot-reloading enabled in development mode</li>
                <li>Debug configurations available for VSCode</li>
            </ul>
        </div>
        
        <h3 class="text-2xl font-bold mb-2">6.2 Testing</h3>
        <div class="card">
            <div class="card-title">Unit Tests</div>
            <pre><code># Run account service tests
npm run test:account

# Run graph service tests
npm run test:graph

# Run content publishing tests
npm run test:content-publishing

# Run content watcher tests
npm run test:content-watcher</code></pre>
        </div>
        
        <div class="card">
            <div class="card-title">E2E Tests</div>
            <pre><code># Run account service E2E tests
make test-e2e-account

# Run graph service E2E tests
npm run test:e2e:graph

# Run content publishing E2E tests
npm run test:e2e:content-publishing

# Run content watcher E2E tests
npm run test:e2e:content-watcher</code></pre>
        </div>
        
        <h3 class="text-2xl font-bold mb-2">6.3 Code Quality</h3>
        <pre><code># Run linter
npm run lint

# Format code
npm run format</code></pre>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">7. Deployment</h2>
        
        <h3 class="text-2xl font-bold mb-2">7.1 Docker Deployment</h3>
        <div class="mermaid">
        flowchart TD
            A[Pull Repository] --> B[Configure Environment Variables]
            B --> C[Build Docker Images]
            C --> D[Start Container Services]
            D --> E[Verify Service Health]
            E --> F[Configure External Access]
        </div>
        
        <h3 class="text-2xl font-bold mb-2">7.2 Cloud Deployment Options</h3>
        <div class="card">
            <div class="card-title">AWS Deployment</div>
            <ul>
                <li>EC2 instances or ECS for container management</li>
                <li>ElastiCache for Redis</li>
                <li>S3 for storage (alternative to IPFS)</li>
                <li>API Gateway for API management</li>
                <li>CloudWatch for monitoring</li>
            </ul>
        </div>
        
        <div class="card">
            <div class="card-title">Kubernetes Deployment</div>
            <ul>
                <li>Container orchestration with Kubernetes</li>
                <li>Helm charts for deployment management</li>
                <li>Service mesh for inter-service communication</li>
                <li>Persistent volumes for data storage</li>
                <li>Horizontal Pod Autoscaling for scalability</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">8. Advanced Topics</h2>
        
        <h3 class="text-2xl font-bold mb-2">8.1 Scalability Considerations</h3>
        <ul>
            <li>Horizontal scaling of API services</li>
            <li>Redis clustering for queue management</li>
            <li>Load balancing across services</li>
            <li>Database sharding strategies</li>
            <li>Caching layers for performance optimization</li>
        </ul>
        
        <h3 class="text-2xl font-bold mb-2">8.2 Security Best Practices</h3>
        <ul>
            <li>Key management and rotation</li>
            <li>API authentication and authorization</li>
            <li>Rate limiting and DDoS protection</li>
            <li>Data encryption at rest and in transit</li>
            <li>Regular security audits</li>
        </ul>
        
        <h3 class="text-2xl font-bold mb-2">8.3 Integration with Existing Systems</h3>
        <div class="mermaid">
        flowchart LR
            subgraph "Legacy Systems"
                A[Existing Social Platform]
                B[User Database]
                C[Content Management]
            end
            
            subgraph "Gateway Integration"
                D[Account Migration]
                E[Graph Synchronization]
                F[Content Publishing Bridge]
                G[Content Indexing]
            end
            
            subgraph "Frequency Blockchain"
                H[Decentralized Data]
            end
            
            A --> D
            B --> D
            D --> H
            B --> E
            E --> H
            C --> F
            F --> H
            H --> G
            G --> A
        </div>
    </div>

    <div class="section">
        <h2 class="text-3xl font-bold mb-4">9. Resources & Links</h2>
        
        <h3 class="text-2xl font-bold mb-2">9.1 Documentation</h3>
        <ul>
            <li><a href="https://projectlibertylabs.github.io/gateway/" target="_blank">Gateway API Documentation</a></li>
            <li><a href="https://docs.frequency.xyz/" target="_blank">Frequency Documentation</a></li>
            <li><a href="https://dsnp.org/" target="_blank">DSNP Documentation</a></li>
        </ul>
        
        <h3 class="text-2xl font-bold mb-2">9.2 Related Projects</h3>
        <ul>
            <li><a href="https://github.com/ProjectLibertyLabs/social-app-template" target="_blank">Social App Template</a></li>
            <li><a href="https://github.com/ProjectLibertyLabs/siwf" target="_blank">Sign In With Frequency (SIWF)</a></li>
        </ul>
        
        <h3 class="text-2xl font-bold mb-2">9.3 Community & Support</h3>
        <ul>
            <li><a href="https://github.com/ProjectLibertyLabs/gateway/issues" target="_blank">GitHub Issues</a></li>
        </ul>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            maxTextSize: 99999999,
            flowchart: {
                htmlLabels: true,
                useMaxWidth: true,
                curve: 'basis'
            },
            mindmap: {
                padding: 16,
                useMaxWidth: true
            }
        });

        // Add resize handler for Mermaid diagrams
        window.addEventListener('resize', function() {
            mermaid.init(undefined, document.querySelectorAll('.mermaid'));
        });
    </script>
</body>
</html>
